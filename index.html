<!DOCTYPE html>
<html lang="da">
    <head>
        <title>Epidemiological Modelling</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="assets/css/main.css">
        <!-- Using google APIs font -->
        <link href="https://fonts.googleapis.com/css?family=Crimson+Text|Work+Sans:400,700" rel="stylesheet">
        <!-- Icon in browser tab -->
        <link rel="icon" href="images/aau_icon.png">
        <!-- Chart.js API link -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3"></script>
        <!-- Not working Chart.js Zoom plugin -->
        <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.7"></script>
        <!-- Math API typography link -->
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </head>
    <body>
        <div id="outerDiv">
            <!-- Header and text -->
            <div id="tekst">
                <h1 id="title1">Epidemiological Modelling</h1>
                <h2 id="titledes">SEIRS Compartmental Model</h2>
            </div>
            <!-- Inserts chart/graph -->
            <div id="left-container">
                <div class="chart">
                    <canvas id="seirsChart"></canvas>
                </div>
                <!-- X-axes slider -->
                <input id="xSlider1" class="slider" type="range" min="0" max="20000" value="10000" step="1">
                <!-- Slider and input boxes -->
                <div class="sliderBoxes">
                    <div class="sliderBox">
                        <p class="sliderTitle">Initial Susceptible (S<span class="sub">0</span>)</p>
                        <p class="sliderDes">Amount of people who are susceptible to the disease.<br>
                        <input type="checkbox" id="fixedPopulation" class="checkbox" name="fixedPopulation" value="" onchange="fixedPopulation()">
                        <label for="fixedPopulation">Fixed Population</label> </p>
                        <input id="S0Form1"      class="inputForm"   type="number"   min="0"    max="10000000"    maxlength="3"   value="99000">
                        <input id="S0Slider1"   class="slider"      type="range"    min="0"    max="10000000"    maxlength="3"   value="99000" step="1">
                    </div>
                    <div class="sliderBox">
                        <p class="sliderTitle">Initial Exposed (E<span class="sub">0</span>)</p>
                        <p class="sliderDes">Amount of people who are exposed but not infectious.</p>
                        <input id="E0Form1"     class="inputForm"   type="number"   min="0"     max="100000"   maxlength="3"   value="0">
                        <input id="E0Slider1"   class="slider"      type="range"    min="0"     max="100000"   maxlength="3"   value="0">
                    </div>
                    <div class="sliderBox">
                        <p class="sliderTitle">Initial Infected (I<span class="sub">0</span>)</p>
                        <p class="sliderDes">Amount of people who are infected and infectious.</p>
                        <input id="I0Form1"     class="inputForm"   type="number"   min="0"     max="100000"   maxlength="3"   value="1000">
                        <input id="I0Slider1"   class="slider"      type="range"    min="0"     max="100000"   maxlength="3"   value="1000">
                    </div>
                    <div class="sliderBox">
                        <p class="sliderTitle">Initial Removed (R<span class="sub">0</span>)</p>
                        <p class="sliderDes">Amount of people who has either recovered from the disease or who are deceased.</p>
                        <input id="R0Form1"     class="inputForm"   type="number"   min="0"     max="100000"   maxlength="3"   value="0">
                        <input id="R0Slider1"   class="slider"      type="range"    min="0"     max="100000"   maxlength="3"   value="0">
                    </div>
                    <div class="sliderBox">
                        <p class="sliderTitle">Step size</p>
                        <p class="sliderDes">Step size used in the RK4 approximation.</p>
                        <input id="stepForm1"    class="inputForm"   type="number"   min="0.01"     max="1"   maxlength="3"   value="0.1">
                        <input id="stepSlider1"  class="slider"      type="range"    min="0.01"     max="1"   maxlength="3"   value="0.1" step="0.01">
                    </div>
                </div>
                <div class="sliderBoxes">
                    <div class="sliderBox">
                        <p class="sliderTitle">Beta</p>
                        <p class="sliderDes">\(\beta\) determines the rate of spread.</p>
                        <input id="betaForm1"   class="inputForm"   type="number"   min="0.001"  max="3"      value="0.02">
                        <input id="betaSlider1" class="slider"      type="range"    min="0.001"     max="3"     value="0.02" step="0.001">
                    </div>
                    <div class="sliderBox">
                        <p class="sliderTitle">Gamma</p>
                        <p class="sliderDes">\(\gamma\) determines the rate at which individuals recover.</p>
                        <input id="gammaForm1"     class="inputForm"   type="number"   min="0.00001" max="0.5"  maxlength="10000000"    value="0.0006">
                        <input id="gammaSlider1"   class="slider"      type="range"    min="0.00001" max="0.5"  maxlength="10000000"    value="0.0006" step="0.0001">
                    </div>
                    <div class="sliderBox">
                        <p class="sliderTitle">Epsilon</p>
                        <p class="sliderDes">\(\epsilon\) determines the rate of recovered individuals returning to susceptible.</p>
                        <input id="epsForm1"    class="inputForm"   type="number"   min="0.00001"  max="0.1"     value="0.02">
                        <input id="epsSlider1"  class="slider"      type="range"    min="0.00001"  max="0.1"     value="0.02" step="0.00001">
                    </div>
                    <div class="sliderBox">
                        <p class="sliderTitle">Sigma</p>
                        <p class="sliderDes">\(\sigma\) determines the rate of individuals who are exposed becoming infectious.</p>
                        <input id="sigForm1"     class="inputForm"   type="number"   min="0.00001" max="0.2"  maxlength="10000000"    value="0.0006">
                        <input id="sigSlider1"   class="slider"      type="range"    min="0.00001" max="0.2"  maxlength="10000000"    value="0.0006" step="0.0001">
                    </div>
                    <div class="sliderBox">
                        <p class="sliderTitle">Total steps</p>
                        <p class="sliderDes">Total number of steps used in the RK4 approximation.</p>
                        <input id="totalStepForm1"     class="inputForm"   type="number"   min="1"     max="20000"     value="10000">
                        <input id="totalStepSlider1"   class="slider"      type="range"    min="1"     max="20000"     value="10000" step="0.1">
                    </div>
                </div>
                <!-- Former Diseases Table -->
                <h2>Former Diseases</h2>
                <table class="diseasesTable">
                    <tr>
                        <th>Disease</th>
                        <th>Parameters</th>
                        <th>Show on graph</th>
                        <th>Source</th>
                    </tr>
                    <tr>
                        <td>COVID-19 Algeria (2020) SIR Model</td>
                        <td>\(\beta\) = 0.0561215, \(\gamma\) = 0.0455331</td>
                        <td><a onclick="covid19Algeria()" style="cursor: pointer; cursor: hand; color: blue;">Press me</a></td>
                        <td><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7570398/pdf/42269_2020_Article_434.pdf" target="_blank">Link</a></td>
                    </tr>
                    <tr>
                        <td>Tuberculosis</td>
                        <td>2</td>
                        <td>3</td>
                        <td>Link</td>
                    </tr>
                    <tr>
                        <td>Ebola</td>
                        <td>2</td>
                        <td>3</td>
                        <td>Link</td>
                    </tr>
                </table>
                <!-- SEIRS Model Explanation -->
                <h2>SEIRS Model</h2>
                <p class="modalText">The SEIRS models ordinary differential equations are:  </p>
                <p class="mathFunc">\( {dS \over dt} = -{\beta SI \over N} + \epsilon R  \)</p>
                <p class="mathFunc">\( {dE \over dt} = {\beta IS \over N} - \sigma E  \)</p>
                <p class="mathFunc">\( {dI \over dt} = \sigma E - \gamma I \)</p>
                <p class="mathFunc">\( {dR \over dt} = \gamma I - \epsilon R \)</p><br>
                <p class="modalText">where</p>
                <ul>
                    <li class="modalText">S is the number of susceptible individuals </li>
                    <li class="modalText">E is the number of exposed individuals</li>
                    <li class="modalText">I is the number of infected individuals</li>
                    <li class="modalText">R is the number of removed individuals</li><br>
                </ul>
                <p class="modalText">and</p>
                <ul>
                <li class="modalText">Î² is the infectious rate</li>                   
                <li class="modalText">ð is the incubation rate</li>
                <li class="modalText">Î³ is the recovery rate</li>
                <li class="modalText">Ïµ is the rate which recovered individuals return to the susceptible statue due to loss of immunity</li> 
                </ul>
            </div>
            <div id="right-container">
                <h2 id="infoTitle">Information
                    <div class="tooltip">?
                        <span class="tooltiptext">Here you can see information about the chart. It updates with the chart itself.</span>
                    </div></h2>

                <!-- Reset button -->
                <button id="resetButton" onclick="resetGraph()">Reset graph</button>
                <!-- Clear Cookies button -->
                <button id="clearCookiesButton" onclick="clearCookies()">Clear Cookies</button>
                <!-- Trigger/Open The Modal -->
                <button id="guideBtn" onclick="showPopup()">Start Guide</button>
                <!-- Infomation table -->
                <table class="infoTable">
                    <tr>
                        <th>Total Population</th>
                        <td id="totalPopulation">100000</td>
                    </tr>
                    <tr>
                        <th>Peak Infected</th>
                        <td id="maxInfected">80000</td>
                    </tr>
                    <tr>
                        <th>Peak Exposed</th>
                        <td id="maxExposed">10000 at day 420</td>
                    </tr>
                </table>
                
                <!-- Saved parameters table -->
                <h2 id="savedTitle">Saved Parameters
                <div class="tooltip">?
                    <span class="tooltiptext">Here you can save your current parameters. These are only available on this device.</span>
                </div></h2>
                <input id="savedName" type="text" placeholder="File name" name="savedName" maxlength="20" value="">
                <button id="savedBtn" onclick="saveParameters()">Save Parameters</button>
                <table id="savedParametersTable" class="savedTable">
                    <tr>
                        <th>File Name</th>
                        <th>Saved Date</th>
                        <th>Try</th>
                        <th>Delete</th>
                    </tr>
                </table>
            </div>
        </div>

        <!-- The Modal / Popup Welcome Message -->
        <div id="guideBox" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
                <span class="close">&times;</span>
                <h1>Welcome</h1>
                <p class="modalText">This website has been developed by a group of 2nd semester Software students from Aalborg University, for the purpose of creating a tool that can aid experts with controlling the spread of ongoing epidemics.
                     Additionally, the purpose of the website is to fulfill the curriculum requirements of the current semester.</p>
                <h1>About the website</h1>
                <p class="modalText">The modelling of infectious diseases is a tool that can be used to study the mechanisms by which diseases spread, to predict the future course of an outbreak, and to evaluate strategies to control an epidemic.
                     The world is currently in the midst of the COVID-19 pandemic, which makes it even more crucial to have access to a tool like this.</p>
                <h1>Created by</h1>
                <p class="modalText">Andreas LÃ¸vig Borg <br>Elias Davidsen <br>Lasse Ryge Andersen <br>Marius Ihlen Gardshodn <br>Mikkel Hagerup Dolmer</p>
                <em class="modalText">Last updated on April 26, 2021</em>
            </div>
        </div>

        <script src="assets/js/slider_inputs.js"></script>
        <script src="assets/js/cookies.js"></script>
        <script src="assets/js/main.js"></script>
        <script src="assets/js/modal.js"></script>
        <script src="assets/js/former_diseases.js"></script>
        <script src="assets/js/saved_parameters.js"></script>
    </body>
</html>
